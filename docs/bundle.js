!function(){for(var e,t,r=(e=function(e,t){(function(e,r){var n=Ke.nextTick,o=(Function.prototype.apply,Array.prototype.slice),i={},s=0;function a(e,t){this._id=e,this._clearFn=t}a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.setImmediate="function"==typeof e?e:function(e){var r=s++,a=!(arguments.length<2)&&o.call(arguments,1);return i[r]=!0,n(function(){i[r]&&(a?e.apply(null,a):e.call(null),t.clearImmediate(r))}),r},t.clearImmediate="function"==typeof r?r:function(e){delete i[e]}}).call(this,r({}).setImmediate,r({}).clearImmediate)},function(r){return t||e(t={exports:{},parent:r},t.exports),t.exports}),n={toByteArray:function(e){for(var t,r=c(e),n=r[0],o=r[1],a=new s(function(e,t,r){return 3*(t+r)/4-r}(0,n,o)),u=0,f=o>0?n-4:n,l=0;l<f;l+=4)t=i[e.charCodeAt(l)]<<18|i[e.charCodeAt(l+1)]<<12|i[e.charCodeAt(l+2)]<<6|i[e.charCodeAt(l+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;return 2===o&&(t=i[e.charCodeAt(l)]<<2|i[e.charCodeAt(l+1)]>>4,a[u++]=255&t),1===o&&(t=i[e.charCodeAt(l)]<<10|i[e.charCodeAt(l+1)]<<4|i[e.charCodeAt(l+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t),a},fromByteArray:function(e){for(var t,r=e.length,n=r%3,i=[],s=0,a=r-n;s<a;s+=16383)i.push(l(e,s,s+16383>a?a:s+16383));return 1===n?(t=e[r-1],i.push(o[t>>2]+o[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),i.join("")}},o=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,f=a.length;u<f;++u)o[u]=a[u],i[a.charCodeAt(u)]=u;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var n,i,s=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(o[(i=n)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63;var d={read:function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,f=u>>1,c=-7,l=r?o-1:0,d=r?-1:1,p=e[t+l];for(l+=d,i=p&(1<<-c)-1,p>>=-c,c+=a;c>0;i=256*i+e[t+l],l+=d,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=256*s+e[t+l],l+=d,c-=8);if(0===i)i=1-f;else{if(i===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=f}return(p?-1:1)*s*Math.pow(2,i-n)},write:function(e,t,r,n,o,i){var s,a,u,f=8*i-o-1,c=(1<<f)-1,l=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,h=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(t*u-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;e[r+p]=255&a,p+=h,a/=256,o-=8);for(s=s<<o|a,f+=o;f>0;e[r+p]=255&s,p+=h,s/=256,f-=8);e[r+p-h]|=128*_}},p={};p.Buffer=m,p.INSPECT_MAX_BYTES=50;var h=2147483647;function _(e){if(e>h)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=m.prototype,t}function m(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return y(e)}return v(e,t,r)}function v(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!m.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|P(e,t),n=_(r),o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return w(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r)).__proto__=m.prototype,n}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return m.from(n,t,r);var o=function(e){if(m.isBuffer(e)){var t=0|b(e.length),r=_(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}return void 0!==e.length?"number"!=typeof e.length||V(e.length)?_(0):w(e):"Buffer"===e.type&&Array.isArray(e.data)?w(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return m.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function g(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function y(e){return g(e),_(e<0?0:0|b(e))}function w(e){for(var t=e.length<0?0:0|b(e.length),r=_(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function b(e){if(e>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|e}function P(e,t){if(m.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(o)return n?-1:Y(e).length;t=(""+t).toLowerCase(),o=!0}}function B(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function S(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),V(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=m.from(t,n)),m.isBuffer(t))return 0===t.length?-1:k(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):k(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function k(e,t,r,n,o){var i,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function f(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var c=-1;for(i=r;i<a;i++)if(f(e,i)===f(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*s}else-1!==c&&(i-=i-c),c=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var l=!0,d=0;d<u;d++)if(f(e,i+d)!==f(t,d)){l=!1;break}if(l)return i}return-1}function E(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(V(a))return s;e[r+s]=a}return s}function M(e,t,r,n){return q(Y(t,e.length-r),e,r,n)}function R(e,t,r,n){return q(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function C(e,t,r,n){return R(e,t,r,n)}function A(e,t,r,n){return q(X(t),e,r,n)}function L(e,t,r,n){return q(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function D(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,u,f=e[o],c=null,l=f>239?4:f>223?3:f>191?2:1;if(o+l<=r)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&f)<<6|63&i)>127&&(c=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(u=(15&f)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&f)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=l}return function(e){var t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=O));return r}(n)}m.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),m.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&m[Symbol.species]===m&&Object.defineProperty(m,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),m.poolSize=8192,m.from=function(e,t,r){return v(e,t,r)},m.prototype.__proto__=Uint8Array.prototype,m.__proto__=Uint8Array,m.alloc=function(e,t,r){return function(e,t,r){return g(e),e<=0?_(e):void 0!==t?"string"==typeof r?_(e).fill(t,r):_(e).fill(t):_(e)}(e,t,r)},m.allocUnsafe=function(e){return y(e)},m.allocUnsafeSlow=function(e){return y(e)},m.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==m.prototype},m.compare=function(e,t){if(Z(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),!m.isBuffer(e)||!m.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},m.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return m.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=m.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(Z(i,Uint8Array)&&(i=m.from(i)),!m.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},m.byteLength=P,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)B(this,t,t+1);return this},m.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)B(this,t,t+3),B(this,t+1,t+2);return this},m.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)B(this,t,t+7),B(this,t+1,t+6),B(this,t+2,t+5),B(this,t+3,t+4);return this},m.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?D(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return D(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return F(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(e){if(!m.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===m.compare(this,e)},m.prototype.inspect=function(){var e="",t=p.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},m.prototype.compare=function(e,t,r,n,o){if(Z(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),!m.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(n,o),f=e.slice(t,r),c=0;c<a;++c)if(u[c]!==f[c]){i=u[c],s=f[c];break}return i<s?-1:s<i?1:0},m.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},m.prototype.indexOf=function(e,t,r){return S(this,e,t,r,!0)},m.prototype.lastIndexOf=function(e,t,r){return S(this,e,t,r,!1)},m.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return E(this,e,t,r);case"utf8":case"utf-8":return M(this,e,t,r);case"ascii":return R(this,e,t,r);case"latin1":case"binary":return C(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function I(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function F(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function T(e,t,r){var n,o=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>o)&&(r=o);for(var i="",s=t;s<r;++s)i+=(n=e[s])<16?"0"+n.toString(16):n.toString(16);return i}function z(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,r,n,o,i){if(!m.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function W(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function H(e,t,r,n,o){return t=+t,r>>>=0,o||W(e,0,r,4),d.write(e,t,r,n,23,4),r+4}function G(e,t,r,n,o){return t=+t,r>>>=0,o||W(e,0,r,8),d.write(e,t,r,n,52,8),r+8}m.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=m.prototype,n},m.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},m.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},m.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},m.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},m.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},m.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},m.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},m.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},m.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},m.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},m.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},m.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},m.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},m.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},m.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),d.read(this,e,!0,23,4)},m.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),d.read(this,e,!1,23,4)},m.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),d.read(this,e,!0,52,8)},m.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),d.read(this,e,!1,52,8)},m.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||U(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},m.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||U(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},m.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,1,255,0),this[t]=255&e,t+1},m.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},m.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},m.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},m.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},m.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);U(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},m.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);U(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},m.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},m.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},m.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},m.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},m.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},m.prototype.writeFloatLE=function(e,t,r){return H(this,e,t,!0,r)},m.prototype.writeFloatBE=function(e,t,r){return H(this,e,t,!1,r)},m.prototype.writeDoubleLE=function(e,t,r){return G(this,e,t,!0,r)},m.prototype.writeDoubleBE=function(e,t,r){return G(this,e,t,!1,r)},m.prototype.copy=function(e,t,r,n){if(!m.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=o-1;i>=0;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return o},m.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!m.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=m.isBuffer(e)?e:m.from(e,n),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function Y(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function X(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!=e}var $={};Object.defineProperty($,"__esModule",{value:!0}),$.array=Array.isArray,$.primitive=function(e){return"string"==typeof e||"number"==typeof e};var J={};function K(e,t,r,n,o){return{sel:e,data:t,children:r,text:n,elm:o,key:void 0===t?void 0:t.key}}Object.defineProperty(J,"__esModule",{value:!0}),J.vnode=K,J.default=K;var Q={};function ee(e,t,r){var n,o,i,s={};if(void 0!==r?(s=t,$.array(r)?n=r:$.primitive(r)?o=r:r&&r.sel&&(n=[r])):void 0!==t&&($.array(t)?n=t:$.primitive(t)?o=t:t&&t.sel?n=[t]:s=t),void 0!==n)for(i=0;i<n.length;++i)$.primitive(n[i])&&(n[i]=J.vnode(void 0,void 0,void 0,n[i],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||function e(t,r,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==r)for(var o=0;o<r.length;++o){var i=r[o].data;void 0!==i&&e(i,r[o].children,r[o].sel)}}(s,n,e),J.vnode(e,s,n,o,void 0)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=ee;var te={};Object.defineProperty(te,"__esModule",{value:!0});var re="http://www.w3.org/1999/xlink",ne="http://www.w3.org/XML/1998/namespace",oe=58,ie=120;function se(e,t){var r,n=t.elm,o=e.data.attrs,i=t.data.attrs;if((o||i)&&o!==i){for(r in o=o||{},i=i||{}){var s=i[r];o[r]!==s&&(!0===s?n.setAttribute(r,""):!1===s?n.removeAttribute(r):r.charCodeAt(0)!==ie?n.setAttribute(r,s):r.charCodeAt(3)===oe?n.setAttributeNS(ne,r,s):r.charCodeAt(5)===oe?n.setAttributeNS(re,r,s):n.setAttribute(r,s))}for(r in o)r in i||n.removeAttribute(r)}}te.attributesModule={create:se,update:se},te.default=te.attributesModule;var ae={};function ue(e,t){var r,n,o=t.elm,i=e.data.class,s=t.data.class;if((i||s)&&i!==s){for(n in s=s||{},i=i||{})s[n]||o.classList.remove(n);for(n in s)(r=s[n])!==i[n]&&o.classList[r?"add":"remove"](n)}}Object.defineProperty(ae,"__esModule",{value:!0}),ae.classModule={create:ue,update:ue},ae.default=ae.classModule;var fe={};Object.defineProperty(fe,"__esModule",{value:!0});var ce=/[A-Z]/g;function le(e,t){var r,n=t.elm,o=e.data.dataset,i=t.data.dataset;if((o||i)&&o!==i){o=o||{},i=i||{};var s=n.dataset;for(r in o)i[r]||(s?r in s&&delete s[r]:n.removeAttribute("data-"+r.replace(ce,"-$&").toLowerCase()));for(r in i)o[r]!==i[r]&&(s?s[r]=i[r]:n.setAttribute("data-"+r.replace(ce,"-$&").toLowerCase(),i[r]))}}fe.datasetModule={create:le,update:le},fe.default=fe.datasetModule;var de={};function pe(e,t){var r,n=e.data.on,o=e.listener,i=e.elm,s=t&&t.data.on,a=t&&t.elm;if(n!==s){if(n&&o)if(s)for(r in n)s[r]||i.removeEventListener(r,o,!1);else for(r in n)i.removeEventListener(r,o,!1);if(s){var u=t.listener=e.listener||function e(t){!function(e,t){var r=e.type,n=t.data.on;n&&n[r]&&function e(t,r,n){if("function"==typeof t)t.call(r,n,r);else if("object"==typeof t)if("function"==typeof t[0])if(2===t.length)t[0].call(r,t[1],n,r);else{var o=t.slice(1);o.push(n),o.push(r),t[0].apply(r,o)}else for(var i=0;i<t.length;i++)e(t[i],r,n)}(n[r],t,e)}(t,e.vnode)};if(u.vnode=t,n)for(r in s)n[r]||a.addEventListener(r,u,!1);else for(r in s)a.addEventListener(r,u,!1)}}}Object.defineProperty(de,"__esModule",{value:!0}),de.eventListenersModule={create:pe,update:pe,destroy:pe},de.default=de.eventListenersModule;var he={};function _e(e,t){var r,n,o=t.elm,i=e.data.props,s=t.data.props;if((i||s)&&i!==s){for(r in s=s||{},i=i||{})s[r]||delete o[r];for(r in s)n=s[r],i[r]===n||"value"===r&&o[r]===n||(o[r]=n)}}Object.defineProperty(he,"__esModule",{value:!0}),he.propsModule={create:_e,update:_e},he.default=he.propsModule;var me={};Object.defineProperty(me,"__esModule",{value:!0});var ve="undefined"!=typeof window&&window.requestAnimationFrame.bind(window)||setTimeout,ge=function(e){ve(function(){ve(e)})},ye=!1;function we(e,t,r){ge(function(){e[t]=r})}function be(e,t){var r,n,o=t.elm,i=e.data.style,s=t.data.style;if((i||s)&&i!==s){s=s||{};var a="delayed"in(i=i||{});for(n in i)s[n]||("-"===n[0]&&"-"===n[1]?o.style.removeProperty(n):o.style[n]="");for(n in s)if(r=s[n],"delayed"===n&&s.delayed)for(var u in s.delayed)r=s.delayed[u],a&&r===i.delayed[u]||we(o.style,u,r);else"remove"!==n&&r!==i[n]&&("-"===n[0]&&"-"===n[1]?o.style.setProperty(n,r):o.style[n]=r)}}me.styleModule={pre:function(){ye=!1},create:be,update:be,destroy:function(e){var t,r,n=e.elm,o=e.data.style;if(o&&(t=o.destroy))for(r in t)n.style[r]=t[r]},remove:function(e,t){var r=e.data.style;if(r&&r.remove){ye||(getComputedStyle(document.body).transform,ye=!0);var n,o=e.elm,i=0,s=r.remove,a=0,u=[];for(n in s)u.push(n),o.style[n]=s[n];for(var f=getComputedStyle(o)["transition-property"].split(", ");i<f.length;++i)-1!==u.indexOf(f[i])&&a++;o.addEventListener("transitionend",function(e){e.target===o&&--a,0===a&&t()})}else t()}},me.default=me.styleModule;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.htmlDomApi={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,r){e.insertBefore(t,r)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}},Pe.default=Pe.htmlDomApi;var Be={};Object.defineProperty(Be,"__esModule",{value:!0});var Se={};function ke(e){return void 0===e}function Ee(e){return void 0!==e}Object.defineProperty(Se,"__esModule",{value:!0});var Me=J.default("",{},[],void 0,void 0);function Re(e,t){return e.key===t.key&&e.sel===t.sel}function Ce(e,t,r){var n,o,i,s={};for(n=t;n<=r;++n)null!=(i=e[n])&&void 0!==(o=i.key)&&(s[o]=n);return s}var Ae=["create","update","remove","destroy","pre","post"];Q.h,Se.init=function(e,t){var r,n,o={},i=void 0!==t?t:Pe.default;for(r=0;r<Ae.length;++r)for(o[Ae[r]]=[],n=0;n<e.length;++n){var s=e[n][Ae[r]];void 0!==s&&o[Ae[r]].push(s)}function a(e,t){return function(){if(0==--t){var r=i.parentNode(e);i.removeChild(r,e)}}}function u(e,t){var r,n=e.data;void 0!==n&&Ee(r=n.hook)&&Ee(r=r.init)&&(r(e),n=e.data);var s=e.children,a=e.sel;if("!"===a)ke(e.text)&&(e.text=""),e.elm=i.createComment(e.text);else if(void 0!==a){var f=a.indexOf("#"),c=a.indexOf(".",f),l=f>0?f:a.length,d=c>0?c:a.length,p=-1!==f||-1!==c?a.slice(0,Math.min(l,d)):a,h=e.elm=Ee(n)&&Ee(r=n.ns)?i.createElementNS(r,p):i.createElement(p);for(l<d&&h.setAttribute("id",a.slice(l+1,d)),c>0&&h.setAttribute("class",a.slice(d+1).replace(/\./g," ")),r=0;r<o.create.length;++r)o.create[r](Me,e);if($.array(s))for(r=0;r<s.length;++r){var _=s[r];null!=_&&i.appendChild(h,u(_,t))}else $.primitive(e.text)&&i.appendChild(h,i.createTextNode(e.text));Ee(r=e.data.hook)&&(r.create&&r.create(Me,e),r.insert&&t.push(e))}else e.elm=i.createTextNode(e.text);return e.elm}function f(e,t,r,n,o,s){for(;n<=o;++n){var a=r[n];null!=a&&i.insertBefore(e,u(a,s),t)}}function c(e){var t,r,n=e.data;if(void 0!==n){for(Ee(t=n.hook)&&Ee(t=t.destroy)&&t(e),t=0;t<o.destroy.length;++t)o.destroy[t](e);if(void 0!==e.children)for(r=0;r<e.children.length;++r)null!=(t=e.children[r])&&"string"!=typeof t&&c(t)}}function l(e,t,r,n){for(;r<=n;++r){var s=void 0,u=void 0,f=void 0,l=t[r];if(null!=l)if(Ee(l.sel)){for(c(l),u=o.remove.length+1,f=a(l.elm,u),s=0;s<o.remove.length;++s)o.remove[s](l,f);Ee(s=l.data)&&Ee(s=s.hook)&&Ee(s=s.remove)?s(l,f):f()}else i.removeChild(e,l.elm)}}return function(e,t){var r,n,s,a=[];for(r=0;r<o.pre.length;++r)o.pre[r]();for(void 0!==e.sel||(e=function(e){var t=e.id?"#"+e.id:"",r=e.className?"."+e.className.split(" ").join("."):"";return J.default(i.tagName(e).toLowerCase()+t+r,{},[],void 0,e)}(e)),Re(e,t)?function e(t,r,n){var s,a;Ee(s=r.data)&&Ee(a=s.hook)&&Ee(s=a.prepatch)&&s(t,r);var c=r.elm=t.elm,d=t.children,p=r.children;if(t!==r){if(void 0!==r.data){for(s=0;s<o.update.length;++s)o.update[s](t,r);Ee(s=r.data.hook)&&Ee(s=s.update)&&s(t,r)}ke(r.text)?Ee(d)&&Ee(p)?d!==p&&function(t,r,n,o){for(var s,a,c,d=0,p=0,h=r.length-1,_=r[0],m=r[h],v=n.length-1,g=n[0],y=n[v];d<=h&&p<=v;)null==_?_=r[++d]:null==m?m=r[--h]:null==g?g=n[++p]:null==y?y=n[--v]:Re(_,g)?(e(_,g,o),_=r[++d],g=n[++p]):Re(m,y)?(e(m,y,o),m=r[--h],y=n[--v]):Re(_,y)?(e(_,y,o),i.insertBefore(t,_.elm,i.nextSibling(m.elm)),_=r[++d],y=n[--v]):Re(m,g)?(e(m,g,o),i.insertBefore(t,m.elm,_.elm),m=r[--h],g=n[++p]):(void 0===s&&(s=Ce(r,d,h)),ke(a=s[g.key])?(i.insertBefore(t,u(g,o),_.elm),g=n[++p]):((c=r[a]).sel!==g.sel?i.insertBefore(t,u(g,o),_.elm):(e(c,g,o),r[a]=void 0,i.insertBefore(t,c.elm,_.elm)),g=n[++p]));(d<=h||p<=v)&&(d>h?f(t,null==n[v+1]?null:n[v+1].elm,n,p,v,o):l(t,r,d,h))}(c,d,p,n):Ee(p)?(Ee(t.text)&&i.setTextContent(c,""),f(c,null,p,0,p.length-1,n)):Ee(d)?l(c,d,0,d.length-1):Ee(t.text)&&i.setTextContent(c,""):t.text!==r.text&&(Ee(d)&&l(c,d,0,d.length-1),i.setTextContent(c,r.text)),Ee(a)&&Ee(s=a.postpatch)&&s(t,r)}}(e,t,a):(n=e.elm,s=i.parentNode(n),u(t,a),null!==s&&(i.insertBefore(s,t.elm,i.nextSibling(n)),l(s,[e],0,0))),r=0;r<a.length;++r)a[r].data.hook.insert(a[r]);for(r=0;r<o.post.length;++r)o.post[r]();return t}};const Le=Se.init([he.default,me.default,ae.default,de.default,fe.default,te.default]),xe=Q.default;var De={Component:function(e){const t=e.view;return e._viewArgs=[],e._vnode=Le(document.createElement("div"),xe("div")),e._render=function(){const r=Le(e._vnode,t.apply(e,e._viewArgs));for(let t in r)e._vnode[t]=r[t];return e._vnode},e.view=function(){return e._viewArgs=arguments,e._render()},e},h:xe},Oe=De.h,Ie=function(e){return Oe("fieldset.bn.pa0.mb2",e)},Fe=De.h,Te=function(e){e.type;var t=e.value,r=e.oninput,n=e.label,o=Fe("input.w-100.code.f6.pa1",{props:{type:"text",value:t},on:{input:r}});return Ie([Fe("label.code.dib.mb1",{style:{userSelect:"none"}},n),Fe("div",{css:{root:["float: right"]}},o)])},ze=De.Component,Ne=De.h,Ue={Layer:function(e){return ze({name:"layer-"+We++,id:String(window.performance.now()),formOpen:!0,renaming:!1,flags:{hasFill:!0,hasRotation:!1,hasStroke:!1},errs:{},funcs:{},props:{copies:1,x:50,y:50,width:50,height:50,fillRed:0,fillGreen:0,fillBlue:100,fillAlpha:.5,strokeRed:0,strokeGreen:0,strokeBlue:0,strokeAlpha:1,strokeWidth:2,radians:0,rotateX:0,rotateY:0,scaleX:1,scaleY:1},toggleFormOpen:function(){this.formOpen=!this.formOpen,this._render()},toggleFieldGroup:function(e){this.flags[e]=!this.flags[e],this._render()},draw:function(e){for(var t=0;t<this.props.copies;t++)this.drawOne(e,t)},drawOne:function(e,t){var r={};for(var n in this.props)r[n]=Ge(this,n,t);var o=r.x,i=r.y;if(e.translate(o,i),this.flags.hasRotation&&e.rotate(r.radians),this.flags.hasFill&&(e.fillStyle="rgba("+r.fillRed+", "+r.fillGreen+", "+r.fillBlue+", "+r.fillAlpha+")",e.fillRect(-r.rotateX||0,-r.rotateY||0,r.width,r.height)),this.flags.hasStroke){var s=r.strokeWidth;e.strokeStyle="rgba("+r.strokeRed+", "+r.strokeGreen+", "+r.strokeBlue+", "+r.strokeAlpha+")",e.lineWidth=s,e.strokeRect(0,0,r.width,r.height)}this.flags.hasRotation&&e.rotate(-r.radians),e.translate(-o,-i)},setProperty:function(e,r){this.props[e]=r,this.errs[e]=!1,this.funcs[e]=function(e,r,n){try{return Function("i","return "+e)}catch(t){return function(){}}}(r)},view:function(){var e=this;if(!this.formOpen)return Ne("div","");var t=function(t){return function(r){e.setProperty(t,r.currentTarget.value)}};return Ne("div",[Te({value:this.props.copies,label:"copies",oninput:t("copies")}),Te({value:this.props.width,label:"width",oninput:t("width")}),Te({value:this.props.height,label:"height",oninput:t("height")}),Te({value:this.props.x,label:"x",oninput:t("x")}),Te({value:this.props.y,label:"y",oninput:t("y")}),je(this,{flag:"hasFill",name:"fill",children:[Te({value:this.props.fillRed,label:"fill red",oninput:t("fillRed")}),Te({value:this.props.fillBlue,label:"fill blue",oninput:t("fillBlue")}),Te({value:this.props.fillGreen,label:"fill green",oninput:t("fillGreen")}),Te({value:this.props.fillAlpha,label:"fill alpha",oninput:t("fillAlpha")})]}),je(this,{flag:"hasStroke",name:"stroke",children:[Te({value:this.props.strokeRed,label:"stroke red",oninput:t("strokeRed")}),Te({value:this.props.strokeGreen,label:"stroke green",oninput:t("strokeGreen")}),Te({value:this.props.strokeBlue,label:"stroke blue",oninput:t("strokeBlue")}),Te({value:this.props.strokeAlpha,label:"stroke alpha",oninput:t("strokeAlpha")}),Te({value:this.props.strokeWidth,label:"stroke width",oninput:t("strokeWidth")})]}),je(this,{flag:"hasRotation",name:"rotation",children:[Te({value:this.props.radians,label:"radians",oninput:t("radians")}),Te({value:this.props.rotateX,label:"origin X",oninput:t("rotateX")}),Te({value:this.props.rotateY,label:"origin Y",oninput:t("rotateY")})]})])}})}},We=0,He=window.performance.now();function Ge(e,r,n){if(!(r in e.funcs))return e.props[r];if(e.errs[r])return null;try{return e.funcs[r](n)}catch(t){e.errs[r]=!0,console.error(t)}}function je(e,t){var r=t.flag,n=t.name,o=t.children,i="field-flag-"+e.id+"-"+r,s=e.flags[r];return Ne("div.bl.bw2.pl1.pb1.mb2",{class:{"b--black-20":!s,"b--green":s}},[Ne("input",{props:{type:"checkbox",checked:s,id:i},dataset:{name:e.name},on:{change:function(){return e.toggleFieldGroup(r)}}}),Ne("label.pointer.code.ml2.b.black-60",{props:{htmlFor:i},style:{userSelect:"none"}},n),Ne("div.mt2",{props:{hidden:!s}},o)])}window.ts=function(){return window.performance.now()-He},window.floor=Math.floor;var Ye,Xe,qe=De.h,Ze=function(e,t){return qe("button.bg-white.ba.b--black-10.f6.pointer.dib.code.ma1.pa1",e,t)},Ve=De.Component,$e=De.h,Je=function(){return Ve({isOpen:!1,open:function(){this.isOpen=!0,this._render()},close:function(){this.isOpen=!1,this._render()},view:function(e){var t=this,r=e.title,n=e.content;return $e("div.code",[$e("div.fixed.w-100.h-100.top-0.left-0.o-20.bg-black.z-1",{class:{dn:!this.isOpen},style:{},on:{click:function(){return t.close()}}}),$e("div.fixed.top-1.shadow-3.bg-white.z-2",{style:{left:"50%",width:"32rem",marginLeft:"-16rem"},class:{dn:!this.isOpen}},[$e("div.flex.justify-between.bb.b--black-20.pa3",[$e("h1.f4.ma0",[r]),Ze("Close",function(){return t.close()})]),$e("div.pa3",[n])])])}})},Ke={},Qe=Ke={};function et(){throw new Error("setTimeout has not been defined")}function tt(){throw new Error("clearTimeout has not been defined")}function rt(e){if(Ye===setTimeout)return setTimeout(e,0);if((Ye===et||!Ye)&&setTimeout)return Ye=setTimeout,setTimeout(e,0);try{return Ye(e,0)}catch(t){try{return Ye.call(null,e,0)}catch(t){return Ye.call(this,e,0)}}}!function(){try{Ye="function"==typeof setTimeout?setTimeout:et}catch(t){Ye=et}try{Xe="function"==typeof clearTimeout?clearTimeout:tt}catch(t){Xe=tt}}();var nt,ot=[],it=!1,st=-1;function at(){it&&nt&&(it=!1,nt.length?ot=nt.concat(ot):st=-1,ot.length&&ut())}function ut(){if(!it){var e=rt(at);it=!0;for(var r=ot.length;r;){for(nt=ot,ot=[];++st<r;)nt&&nt[st].run();st=-1,r=ot.length}nt=null,it=!1,function(e){if(Xe===clearTimeout)return clearTimeout(e);if((Xe===tt||!Xe)&&clearTimeout)return Xe=clearTimeout,clearTimeout(e);try{Xe(e)}catch(t){try{return Xe.call(null,e)}catch(t){return Xe.call(this,e)}}}(e)}}function ft(e,t){this.fun=e,this.array=t}function ct(){}Qe.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];ot.push(new ft(e,t)),1!==ot.length||it||rt(ut)},ft.prototype.run=function(){this.fun.apply(null,this.array)},Qe.title="browser",Qe.browser=!0,Qe.env={},Qe.argv=[],Qe.version="",Qe.versions={},Qe.on=ct,Qe.addListener=ct,Qe.once=ct,Qe.off=ct,Qe.removeListener=ct,Qe.removeAllListeners=ct,Qe.emit=ct,Qe.prependListener=ct,Qe.prependOnceListener=ct,Qe.listeners=function(e){return[]},Qe.binding=function(e){throw new Error("process.binding is not supported")},Qe.cwd=function(){return"/"},Qe.chdir=function(e){throw new Error("process.chdir is not supported")},Qe.umask=function(){return 0};(function(e){var t=function(){"use strict";var r=3,n="function"==typeof e?e:setTimeout,o=4294967296,i=[4294967295,-o],s=[0,-0x8000000000000000],a=[0,0],u=[1,0];function f(e,t){postMessage({action:r,cbn:t,result:e})}function c(e){var t=[];return t[e-1]=void 0,t}function l(e,t){return h(e[0]+t[0],e[1]+t[1])}function d(e,t){return r=~~Math.max(Math.min(e[1]/o,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/o,2147483647),-2147483648),n=v(e)&v(t),i=n,n<0&&(i+=o),[i,r*o];var r,n,i}function p(e,t){var r,n;return e[0]==t[0]&&e[1]==t[1]?0:(r=e[1]<0,n=t[1]<0,r&&!n?-1:!r&&n?1:b(e,t)[1]<0?-1:1)}function h(e,t){var r,n;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(r=t%o)+(n=Math.floor(e/o)*o),e=e-n+r;e<0;)e+=o,t-=o;for(;e>4294967295;)e-=o,t+=o;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function _(e,t){return e[0]==t[0]&&e[1]==t[1]}function m(e){return e>=0?[e,0]:[e+o,-o]}function v(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-o,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function g(e){return e<=30?1<<e:g(30)*g(e-30)}function y(e,t){var r,n,i,u;if(t&=63,_(e,s))return t?a:e;if(e[1]<0)throw new Error("Neg");return u=g(t),n=e[1]*u%0x10000000000000000,(n+=r=(i=e[0]*u)-i%o)>=0x8000000000000000&&(n-=0x10000000000000000),[i-=r,n]}function w(e,t){var r;return r=g(t&=63),h(Math.floor(e[0]/r),e[1]/r)}function b(e,t){return h(e[0]-t[0],e[1]-t[1])}function P(e,t){return e.buf=t,e.pos=0,e.count=t.length,e}function B(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function S(e,t,r,n){return e.pos>=e.count?-1:(n=Math.min(n,e.count-e.pos),C(e.buf,e.pos,t,r,n),e.pos+=n,n)}function k(e){return e.buf=c(32),e.count=0,e}function E(e){var t=e.buf;return t.length=e.count,t}function M(e,t){e.buf[e.count++]=t<<24>>24}function R(e,t,r,n){C(t,r,e.buf,e.count,n),e.count+=n}function C(e,t,r,n,o){for(var i=0;i<o;++i)r[n+i]=e[t+i]}function A(e,r,n){return e.output=k({}),function(e,r,n,o,s){var u,f;if(p(o,i)<0)throw new Error("invalid length "+o);for(e.length_0=o,function(e,t){!function(e,t){e._dictionarySize=t;for(var r=0;t>1<<r;++r);e._distTableSize=2*r}(t,1<<e.s),t._numFastBytes=e.f,function(e,t){var r=e._matchFinderType;e._matchFinderType=t,e._matchFinder&&r!=e._matchFinderType&&(e._dictionarySizePrev=-1,e._matchFinder=null)}(t,e.m),t._numLiteralPosStateBits=0,t._numLiteralContextBits=3,t._posStateBits=2,t._posStateMask=3}(s,u=function(e){var t;for(e._repDistances=c(4),e._optimum=[],e._rangeEncoder={},e._isMatch=c(192),e._isRep=c(12),e._isRepG0=c(12),e._isRepG1=c(12),e._isRepG2=c(12),e._isRep0Long=c(192),e._posSlotEncoder=[],e._posEncoders=c(114),e._posAlignEncoder=Be({},4),e._lenEncoder=de({}),e._repMatchLenEncoder=de({}),e._literalEncoder={},e._matchDistances=[],e._posSlotPrices=[],e._distancesPrices=[],e._alignPrices=c(16),e.reps=c(4),e.repLens=c(4),e.processedInSize=[a],e.processedOutSize=[a],e.finished=[0],e.properties=c(5),e.tempPrices=c(128),e._longestMatchLength=0,e._matchFinderType=1,e._numDistancePairs=0,e._numFastBytesPrev=-1,e.backRes=0,t=0;t<4096;++t)e._optimum[t]={};for(t=0;t<4;++t)e._posSlotEncoder[t]=Be({},6);return e}({})),u._writeEndMark=void 0===t.disableEndMark,function(e,t){e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24;for(var r=0;r<4;++r)e.properties[1+r]=e._dictionarySize>>8*r<<24>>24;R(t,e.properties,0,5)}(u,n),f=0;f<64;f+=8)M(n,255&v(w(o,f)));e.chunker=(u._needReleaseMFStream=0,u._inStream=r,u._finished=0,function(e){var t,r;e._matchFinder||(t={},r=4,e._matchFinderType||(r=2),function(e,t){e.HASH_ARRAY=t>2,e.HASH_ARRAY?(e.kNumHashDirectBytes=0,e.kMinMatchCheck=4,e.kFixHashSize=66560):(e.kNumHashDirectBytes=2,e.kMinMatchCheck=3,e.kFixHashSize=0)}(t,r),e._matchFinder=t),function(e,t,r){var n,o;if(null==e.m_Coders||e.m_NumPrevBits!=r||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=r,o=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=c(o),n=0;n<o;++n)e.m_Coders[n]=ge({})}(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),(e._dictionarySize!=e._dictionarySizePrev||e._numFastBytesPrev!=e._numFastBytes)&&(function(e,t,r,n,o){var i,s;t<1073741567&&(e._cutValue=16+(n>>1),function(e,t,r,n){var o;e._keepSizeBefore=t,e._keepSizeAfter=r,o=t+r+n,(null==e._bufferBase||e._blockSize!=o)&&(e._bufferBase=null,e._blockSize=o,e._bufferBase=c(e._blockSize)),e._pointerToLastSafePosition=e._blockSize-r}(e,t+4096,n+274,256+~~((t+4096+n+274)/2)),e._matchMaxLen=n,i=t+1,e._cyclicBufferSize!=i&&(e._son=c(2*(e._cyclicBufferSize=i))),s=65536,e.HASH_ARRAY&&(s=t-1,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s>>=1,(s|=65535)>16777216&&(s>>=1),e._hashMask=s,++s,s+=e.kFixHashSize),s!=e._hashSizeSum&&(e._hash=c(e._hashSizeSum=s)))}(e._matchFinder,e._dictionarySize,0,e._numFastBytes),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes)}(u),u._rangeEncoder.Stream=n,function(e){(function(e){e._state=0,e._previousByte=0;for(var t=0;t<4;++t)e._repDistances[t]=0})(e),function(e){e._position=a,e.Low=a,e.Range=-1,e._cacheSize=1,e._cache=0}(e._rangeEncoder),Le(e._isMatch),Le(e._isRep0Long),Le(e._isRep),Le(e._isRepG0),Le(e._isRepG1),Le(e._isRepG2),Le(e._posEncoders),function(e){var t,r=1<<e.m_NumPrevBits+e.m_NumPosBits;for(t=0;t<r;++t)Le(e.m_Coders[t].m_Encoders)}(e._literalEncoder);for(var t=0;t<4;++t)Le(e._posSlotEncoder[t].Models);fe(e._lenEncoder,1<<e._posStateBits),fe(e._repMatchLenEncoder,1<<e._posStateBits),Le(e._posAlignEncoder.Models),e._longestMatchWasFound=0,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}(u),ee(u),Q(u),u._lenEncoder._tableSize=u._numFastBytes+1-2,he(u._lenEncoder,1<<u._posStateBits),u._repMatchLenEncoder._tableSize=u._numFastBytes+1-2,he(u._repMatchLenEncoder,1<<u._posStateBits),u.nowPos64=a,function(e,t){return e.encoder=t,e.decoder=null,e.alive=1,e}({},u))}(e,P({},r),e.output,m(r.length),n),e}function L(e,t){return e.output=k({}),function(e,t,r){var n,o,s,u,f="",l=[];for(o=0;o<5;++o){if(-1==(s=B(t)))throw new Error("truncated input");l[o]=s<<24>>24}if(!function(e,t){var r,n,o,i,s,a,u;if(t.length<5)return 0;for(o=(u=255&t[0])%9,i=(a=~~(u/9))%5,s=~~(a/5),r=0,n=0;n<4;++n)r+=(255&t[1+n])<<8*n;return r>99999999||!function(e,t,r,n){if(t>8||r>4||n>4)return 0;!function(e,t,r){var n,o;if(null==e.m_Coders||e.m_NumPrevBits!=r||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=r,o=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=c(o),n=0;n<o;++n)e.m_Coders[n]=$({})}(e.m_LiteralDecoder,r,t);var o=1<<n;return X(e.m_LenDecoder,o),X(e.m_RepLenDecoder,o),e.m_PosStateMask=o-1,1}(e,o,i,s)?0:function(e,t){return t<0?0:(e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=Math.max(e.m_DictionarySize,1),function(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=c(t)),e._windowSize=t,e._pos=0,e._streamPos=0}(e.m_OutWindow,Math.max(e.m_DictionarySizeCheck,4096))),1)}(e,r)}(n=function(e){e.m_OutWindow={},e.m_RangeDecoder={},e.m_IsMatchDecoders=c(192),e.m_IsRepDecoders=c(12),e.m_IsRepG0Decoders=c(12),e.m_IsRepG1Decoders=c(12),e.m_IsRepG2Decoders=c(12),e.m_IsRep0LongDecoders=c(192),e.m_PosSlotDecoder=c(4),e.m_PosDecoders=c(114),e.m_PosAlignDecoder=be({},4),e.m_LenDecoder=Z({}),e.m_RepLenDecoder=Z({}),e.m_LiteralDecoder={};for(var t=0;t<4;++t)e.m_PosSlotDecoder[t]=be({},6);return e}({}),l))throw new Error("corrupted input");for(o=0;o<64;o+=8){if(-1==(s=B(t)))throw new Error("truncated input");1==(s=s.toString(16)).length&&(s="0"+s),f=s+""+f}/^0+$|^f+$/i.test(f)?e.length_0=i:(u=parseInt(f,16),e.length_0=u>4294967295?i:m(u)),e.chunker=function(e,t,r,n){return e.m_RangeDecoder.Stream=t,H(e.m_OutWindow),e.m_OutWindow._stream=r,function(e){e.m_OutWindow._streamPos=0,e.m_OutWindow._pos=0,Le(e.m_IsMatchDecoders),Le(e.m_IsRep0LongDecoders),Le(e.m_IsRepDecoders),Le(e.m_IsRepG0Decoders),Le(e.m_IsRepG1Decoders),Le(e.m_IsRepG2Decoders),Le(e.m_PosDecoders),function(e){var t,r;for(r=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<r;++t)Le(e.m_Coders[t].m_Decoders)}(e.m_LiteralDecoder);for(var t=0;t<4;++t)Le(e.m_PosSlotDecoder[t].Models);V(e.m_LenDecoder),V(e.m_RepLenDecoder),Le(e.m_PosAlignDecoder.Models),function(e){e.Code=0,e.Range=-1;for(var t=0;t<5;++t)e.Code=e.Code<<8|B(e.Stream)}(e.m_RangeDecoder)}(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=n,e.nowPos64=a,e.prevByte=0,function(e,t){return e.decoder=t,e.encoder=null,e.alive=1,e}({},e)}(n,t,r,e.length_0)}(e,P({},t),e.output),e}function x(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function D(e,t,r,n){var o,i;for(e._streamEndWasReached&&e._pos+t+n>e._streamPos&&(n=e._streamPos-(e._pos+t)),++r,i=e._bufferOffset+e._pos+t,o=0;o<n&&e._bufferBase[i+o]==e._bufferBase[i+o-r];++o);return o}function O(e){return e._streamPos-e._pos}function I(e){var t,r;if(!e._streamEndWasReached)for(;;){if(!(r=-e._bufferOffset+e._blockSize-e._streamPos))return;if(-1==(t=S(e._stream,e._bufferBase,e._bufferOffset+e._streamPos,r)))return e._posLimit=e._streamPos,e._bufferOffset+e._posLimit>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=1);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function F(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}var T=function(){var e,t,r,n=[];for(e=0;e<256;++e){for(r=e,t=0;t<8;++t)0!=(1&r)?r=r>>>1^-306674912:r>>>=1;n[e]=r}return n}();function z(e){var t;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),function(e){++e._pos,e._pos>e._posLimit&&(e._bufferOffset+e._pos>e._pointerToLastSafePosition&&function(e){var t,r,n;for((n=e._bufferOffset+e._pos-e._keepSizeBefore)>0&&--n,r=e._bufferOffset+e._streamPos-n,t=0;t<r;++t)e._bufferBase[t]=e._bufferBase[n+t];e._bufferOffset-=n}(e),I(e))}(e),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,N(e._son,2*e._cyclicBufferSize,t),N(e._hash,e._hashSizeSum,t),F(e,t))}function N(e,t,r){var n,o;for(n=0;n<t;++n)(o=e[n]||0)<=r?o=0:o-=r,e[n]=o}function U(e){var t=e._pos-e._streamPos;t&&(R(e._stream,e._buffer,e._streamPos,t),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function W(e,t){var r=e._pos-t-1;return r<0&&(r+=e._windowSize),e._buffer[r]}function H(e){U(e),e._stream=null}function G(e){return(e-=2)<4?e:3}function j(e){return e<4?0:e<10?e-3:e-6}function Y(e){if(!e.alive)throw new Error("bad state");return e.encoder?function(e){(function(e,t,r,n){var o,i,s,f,c,d,h,g,y,w,P,B,S,k,E;if(t[0]=a,r[0]=a,n[0]=1,e._inStream&&(e._matchFinder._stream=e._inStream,function(e){e._bufferOffset=0,e._pos=0,e._streamPos=0,e._streamEndWasReached=0,I(e),e._cyclicBufferPos=0,F(e,-1)}(e._matchFinder),e._needReleaseMFStream=1,e._inStream=null),!e._finished){if(e._finished=1,k=e.nowPos64,_(e.nowPos64,a)){if(!O(e._matchFinder))return void te(e,v(e.nowPos64));se(e),S=v(e.nowPos64)&e._posStateMask,De(e._rangeEncoder,e._isMatch,(e._state<<4)+S,0),e._state=j(e._state),s=x(e._matchFinder,-e._additionalOffset),me(_e(e._literalEncoder,v(e.nowPos64),e._previousByte),e._rangeEncoder,s),e._previousByte=s,--e._additionalOffset,e.nowPos64=l(e.nowPos64,u)}if(O(e._matchFinder))for(;;){if(h=re(e,v(e.nowPos64)),w=e.backRes,S=v(e.nowPos64)&e._posStateMask,i=(e._state<<4)+S,1==h&&-1==w)De(e._rangeEncoder,e._isMatch,i,0),s=x(e._matchFinder,-e._additionalOffset),E=_e(e._literalEncoder,v(e.nowPos64),e._previousByte),e._state<7?me(E,e._rangeEncoder,s):(y=x(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),ve(E,e._rangeEncoder,y,s)),e._previousByte=s,e._state=j(e._state);else{if(De(e._rangeEncoder,e._isMatch,i,1),w<4){if(De(e._rangeEncoder,e._isRep,e._state,1),w?(De(e._rangeEncoder,e._isRepG0,e._state,1),1==w?De(e._rangeEncoder,e._isRepG1,e._state,0):(De(e._rangeEncoder,e._isRepG1,e._state,1),De(e._rangeEncoder,e._isRepG2,e._state,w-2))):(De(e._rangeEncoder,e._isRepG0,e._state,0),De(e._rangeEncoder,e._isRep0Long,i,1==h?0:1)),1==h?e._state=e._state<7?9:11:(le(e._repMatchLenEncoder,e._rangeEncoder,h-2,S),e._state=e._state<7?8:11),f=e._repDistances[w],0!=w){for(d=w;d>=1;--d)e._repDistances[d]=e._repDistances[d-1];e._repDistances[0]=f}}else{for(De(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,le(e._lenEncoder,e._rangeEncoder,h-2,S),B=ue(w-=4),g=G(h),Se(e._posSlotEncoder[g],e._rangeEncoder,B),B>=4&&(P=w-(o=(2|1&B)<<(c=(B>>1)-1)),B<14?Re(e._posEncoders,o-B-1,e._rangeEncoder,c,P):(Oe(e._rangeEncoder,P>>4,c-4),Ee(e._posAlignEncoder,e._rangeEncoder,15&P),++e._alignPriceCount)),f=w,d=3;d>=1;--d)e._repDistances[d]=e._repDistances[d-1];e._repDistances[0]=f,++e._matchPriceCount}e._previousByte=x(e._matchFinder,h-1-e._additionalOffset)}if(e._additionalOffset-=h,e.nowPos64=l(e.nowPos64,m(h)),!e._additionalOffset){if(e._matchPriceCount>=128&&ee(e),e._alignPriceCount>=16&&Q(e),t[0]=e.nowPos64,r[0]=Ie(e._rangeEncoder),!O(e._matchFinder))return void te(e,v(e.nowPos64));if(p(b(e.nowPos64,k),[4096,0])>=0)return e._finished=0,void(n[0]=0)}}else te(e,v(e.nowPos64))}})(e.encoder,e.encoder.processedInSize,e.encoder.processedOutSize,e.encoder.finished),e.inBytesProcessed=e.encoder.processedInSize[0],e.encoder.finished[0]&&(function(e){ae(e),e._rangeEncoder.Stream=null}(e.encoder),e.alive=0)}(e):function(e){var t=function(e){var t,r,n,o,i,s;if(s=v(e.nowPos64)&e.m_PosStateMask,Ae(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+s)){if(Ae(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))n=0,Ae(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?(Ae(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?(Ae(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?(r=e.rep3,e.rep3=e.rep2):r=e.rep2,e.rep2=e.rep1):r=e.rep1,e.rep1=e.rep0,e.rep0=r):Ae(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+s)||(e.state=e.state<7?9:11,n=1),n||(n=q(e.m_RepLenDecoder,e.m_RangeDecoder,s)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,n=2+q(e.m_LenDecoder,e.m_RangeDecoder,s),e.state=e.state<7?7:10,(i=Pe(e.m_PosSlotDecoder[G(n)],e.m_RangeDecoder))>=4){if(o=(i>>1)-1,e.rep0=(2|1&i)<<o,i<14)e.rep0+=function(e,t,r,n){var o,i,s=1,a=0;for(i=0;i<n;++i)o=Ae(r,e,t+s),s<<=1,s+=o,a|=o<<i;return a}(e.m_PosDecoders,e.rep0-i-1,e.m_RangeDecoder,o);else if(e.rep0+=function(e,t){var r,n,i=0;for(r=o-4;0!=r;--r)e.Range>>>=1,n=e.Code-e.Range>>>31,e.Code-=e.Range&n-1,i=i<<1|1-n,-16777216&e.Range||(e.Code=e.Code<<8|B(e.Stream),e.Range<<=8);return i}(e.m_RangeDecoder)<<4,e.rep0+=function(e,t){var r,n,o=1,i=0;for(n=0;n<e.NumBitLevels;++n)r=Ae(t,e.Models,o),o<<=1,o+=r,i|=r<<n;return i}(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=i;if(p(m(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;!function(e,t,r){var n=e._pos-t-1;for(n<0&&(n+=e._windowSize);0!=r;--r)n>=e._windowSize&&(n=0),e._buffer[e._pos++]=e._buffer[n++],e._pos>=e._windowSize&&U(e)}(e.m_OutWindow,e.rep0,n),e.nowPos64=l(e.nowPos64,m(n)),e.prevByte=W(e.m_OutWindow,0)}else t=function(e,t,r){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&r)>>>8-e.m_NumPrevBits)]}(e.m_LiteralDecoder,v(e.nowPos64),e.prevByte),e.state<7?e.prevByte=function(e,t){var r=1;do{r=r<<1|Ae(t,e.m_Decoders,r)}while(r<256);return r<<24>>24}(t,e.m_RangeDecoder):e.prevByte=function(e,t,r){var n,o,i=1;do{if(o=r>>7&1,r<<=1,i=i<<1|(n=Ae(t,e.m_Decoders,(1+o<<8)+i)),o!=n){for(;i<256;)i=i<<1|Ae(t,e.m_Decoders,i);break}}while(i<256);return i<<24>>24}(t,e.m_RangeDecoder,W(e.m_OutWindow,e.rep0)),function(e,t){e._buffer[e._pos++]=t,e._pos>=e._windowSize&&U(e)}(e.m_OutWindow,e.prevByte),e.state=j(e.state),e.nowPos64=l(e.nowPos64,u);return 0}(e.decoder);if(-1==t)throw new Error("corrupted input");e.inBytesProcessed=i,e.outBytesProcessed=e.decoder.nowPos64,(t||p(e.decoder.outSize,a)>=0&&p(e.decoder.nowPos64,e.decoder.outSize)>=0)&&(U(e.decoder.m_OutWindow),H(e.decoder.m_OutWindow),e.decoder.m_RangeDecoder.Stream=null,e.alive=0)}(e),e.alive}function X(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=be({},3),e.m_MidCoder[e.m_NumPosStates]=be({},3)}function q(e,t,r){if(!Ae(t,e.m_Choice,0))return Pe(e.m_LowCoder[r],t);var n=8;return Ae(t,e.m_Choice,1)?n+=8+Pe(e.m_HighCoder,t):n+=Pe(e.m_MidCoder[r],t),n}function Z(e){return e.m_Choice=c(2),e.m_LowCoder=c(16),e.m_MidCoder=c(16),e.m_HighCoder=be({},8),e.m_NumPosStates=0,e}function V(e){Le(e.m_Choice);for(var t=0;t<e.m_NumPosStates;++t)Le(e.m_LowCoder[t].Models),Le(e.m_MidCoder[t].Models);Le(e.m_HighCoder.Models)}function $(e){return e.m_Decoders=c(768),e}var J=function(){var e,t,r,n=2,o=[0,1];for(r=2;r<22;++r)for(t=1<<(r>>1)-1,e=0;e<t;++e,++n)o[n]=r<<24>>24;return o}();function K(e,t){var r,n,o,i;e._optimumEndIndex=t,o=e._optimum[t].PosPrev,n=e._optimum[t].BackPrev;do{e._optimum[t].Prev1IsChar&&(we(e._optimum[o]),e._optimum[o].PosPrev=o-1,e._optimum[t].Prev2&&(e._optimum[o-1].Prev1IsChar=0,e._optimum[o-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[o-1].BackPrev=e._optimum[t].BackPrev2)),i=o,r=n,n=e._optimum[i].BackPrev,o=e._optimum[i].PosPrev,e._optimum[i].BackPrev=r,e._optimum[i].PosPrev=t,t=i}while(t>0);return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function Q(e){for(var t=0;t<16;++t)e._alignPrices[t]=Me(e._posAlignEncoder,t);e._alignPriceCount=0}function ee(e){var t,r,n,o,i,s,a,u;for(o=4;o<128;++o)t=(2|1&(s=ue(o)))<<(n=(s>>1)-1),e.tempPrices[o]=Ce(e._posEncoders,t-s-1,n,o-t);for(i=0;i<4;++i){for(r=e._posSlotEncoder[i],a=i<<6,s=0;s<e._distTableSize;++s)e._posSlotPrices[a+s]=ke(r,s);for(s=14;s<e._distTableSize;++s)e._posSlotPrices[a+s]+=(s>>1)-1-4<<6;for(u=128*i,o=0;o<4;++o)e._distancesPrices[u+o]=e._posSlotPrices[a+o];for(;o<128;++o)e._distancesPrices[u+o]=e._posSlotPrices[a+ue(o)]+e.tempPrices[o]}e._matchPriceCount=0}function te(e,t){ae(e),function(e,t){if(e._writeEndMark){De(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),De(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,le(e._lenEncoder,e._rangeEncoder,0,t);var r=G(2);Se(e._posSlotEncoder[r],e._rangeEncoder,63),Oe(e._rangeEncoder,67108863,26),Ee(e._posAlignEncoder,e._rangeEncoder,15)}}(e,t&e._posStateMask);for(var r=0;r<5;++r)Fe(e._rangeEncoder)}function re(e,t){var r,n,o,i,s,a,u,f,c,l,d,p,h,_,m,v,g,y,w,b,P,B,S,k,E,M,R,C,A,L,I,F,T,z,N,U,W,H,G,Y,X,q,Z,V;if(e._optimumEndIndex!=e._optimumCurrentIndex)return h=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,h;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(p=e._longestMatchLength,e._longestMatchWasFound=0):p=se(e),M=e._numDistancePairs,(k=O(e._matchFinder)+1)<2)return e.backRes=-1,1;for(k>273&&(k=273),G=0,c=0;c<4;++c)e.reps[c]=e._repDistances[c],e.repLens[c]=D(e._matchFinder,-1,e.reps[c],273),e.repLens[c]>e.repLens[G]&&(G=c);if(e.repLens[G]>=e._numFastBytes)return e.backRes=G,ie(e,(h=e.repLens[G])-1),h;if(p>=e._numFastBytes)return e.backRes=e._matchDistances[M-1]+4,ie(e,p-1),p;if(u=x(e._matchFinder,-1),g=x(e._matchFinder,-e._repDistances[0]-1-1),p<2&&u!=g&&e.repLens[G]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,T=t&e._posStateMask,e._optimum[1].Price=xe[e._isMatch[(e._state<<4)+T]>>>2]+ye(_e(e._literalEncoder,t,e._previousByte),e._state>=7,g,u),we(e._optimum[1]),H=(y=xe[2048-e._isMatch[(e._state<<4)+T]>>>2])+xe[2048-e._isRep[e._state]>>>2],g==u&&(Y=H+function(e,t,r){return xe[e._isRepG0[t]>>>2]+xe[e._isRep0Long[(t<<4)+r]>>>2]}(e,e._state,T))<e._optimum[1].Price&&(e._optimum[1].Price=Y,function(e){e.BackPrev=0,e.Prev1IsChar=0}(e._optimum[1])),(d=p>=e.repLens[G]?p:e.repLens[G])<2)return e.backRes=e._optimum[1].BackPrev,1;e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],l=d;do{e._optimum[l--].Price=268435455}while(l>=2);for(c=0;c<4;++c)if(!((W=e.repLens[c])<2)){N=H+oe(e,c,e._state,T);do{(i=N+pe(e._repMatchLenEncoder,W-2,T))<(L=e._optimum[W]).Price&&(L.Price=i,L.PosPrev=0,L.BackPrev=c,L.Prev1IsChar=0)}while(--W>=2)}if(S=y+xe[e._isRep[e._state]>>>2],(l=e.repLens[0]>=2?e.repLens[0]+1:2)<=p){for(R=0;l>e._matchDistances[R];)R+=2;for(;(i=S+ne(e,f=e._matchDistances[R+1],l,T))<(L=e._optimum[l]).Price&&(L.Price=i,L.PosPrev=0,L.BackPrev=f+4,L.Prev1IsChar=0),l!=e._matchDistances[R]||(R+=2)!=M;++l);}for(r=0;;){if(++r==d)return K(e,r);if(w=se(e),M=e._numDistancePairs,w>=e._numFastBytes)return e._longestMatchLength=w,e._longestMatchWasFound=1,K(e,r);if(++t,F=e._optimum[r].PosPrev,e._optimum[r].Prev1IsChar?(--F,e._optimum[r].Prev2?(q=e._optimum[e._optimum[r].PosPrev2].State,q=e._optimum[r].BackPrev2<4?q<7?8:11:q<7?7:10):q=e._optimum[F].State,q=j(q)):q=e._optimum[F].State,F==r-1?q=e._optimum[r].BackPrev?j(q):q<7?9:11:(e._optimum[r].Prev1IsChar&&e._optimum[r].Prev2?(F=e._optimum[r].PosPrev2,I=e._optimum[r].BackPrev2,q=q<7?8:11):q=(I=e._optimum[r].BackPrev)<4?q<7?8:11:q<7?7:10,A=e._optimum[F],I<4?I?1==I?(e.reps[0]=A.Backs1,e.reps[1]=A.Backs0,e.reps[2]=A.Backs2,e.reps[3]=A.Backs3):2==I?(e.reps[0]=A.Backs2,e.reps[1]=A.Backs0,e.reps[2]=A.Backs1,e.reps[3]=A.Backs3):(e.reps[0]=A.Backs3,e.reps[1]=A.Backs0,e.reps[2]=A.Backs1,e.reps[3]=A.Backs2):(e.reps[0]=A.Backs0,e.reps[1]=A.Backs1,e.reps[2]=A.Backs2,e.reps[3]=A.Backs3):(e.reps[0]=I-4,e.reps[1]=A.Backs0,e.reps[2]=A.Backs1,e.reps[3]=A.Backs2)),e._optimum[r].State=q,e._optimum[r].Backs0=e.reps[0],e._optimum[r].Backs1=e.reps[1],e._optimum[r].Backs2=e.reps[2],e._optimum[r].Backs3=e.reps[3],a=e._optimum[r].Price,u=x(e._matchFinder,-1),g=x(e._matchFinder,-e.reps[0]-1-1),T=t&e._posStateMask,b=0,(n=a+xe[e._isMatch[(q<<4)+T]>>>2]+ye(_e(e._literalEncoder,t,x(e._matchFinder,-2)),q>=7,g,u))<(P=e._optimum[r+1]).Price&&(P.Price=n,P.PosPrev=r,P.BackPrev=-1,P.Prev1IsChar=0,b=1),H=(y=a+xe[2048-e._isMatch[(q<<4)+T]>>>2])+xe[2048-e._isRep[q]>>>2],g!=u||P.PosPrev<r&&!P.BackPrev||(Y=H+(xe[e._isRepG0[q]>>>2]+xe[e._isRep0Long[(q<<4)+T]>>>2]))<=P.Price&&(P.Price=Y,P.PosPrev=r,P.BackPrev=0,P.Prev1IsChar=0,b=1),!((k=E=4095-r<(E=O(e._matchFinder)+1)?4095-r:E)<2)){if(k>e._numFastBytes&&(k=e._numFastBytes),!b&&g!=u&&(V=Math.min(E-1,e._numFastBytes),(m=D(e._matchFinder,0,e.reps[0],V))>=2)){for(Z=j(q),z=t+1&e._posStateMask,B=n+xe[2048-e._isMatch[(Z<<4)+z]>>>2]+xe[2048-e._isRep[Z]>>>2],C=r+1+m;d<C;)e._optimum[++d].Price=268435455;(i=B+(pe(e._repMatchLenEncoder,m-2,z)+oe(e,0,Z,z)))<(L=e._optimum[C]).Price&&(L.Price=i,L.PosPrev=r+1,L.BackPrev=0,L.Prev1IsChar=1,L.Prev2=0)}for(X=2,U=0;U<4;++U)if(!((_=D(e._matchFinder,-1,e.reps[U],k))<2)){v=_;do{for(;d<r+_;)e._optimum[++d].Price=268435455;(i=H+(pe(e._repMatchLenEncoder,_-2,T)+oe(e,U,q,T)))<(L=e._optimum[r+_]).Price&&(L.Price=i,L.PosPrev=r,L.BackPrev=U,L.Prev1IsChar=0)}while(--_>=2);if(_=v,U||(X=_+1),_<E&&(V=Math.min(E-1-_,e._numFastBytes),(m=D(e._matchFinder,_,e.reps[U],V))>=2)){for(Z=q<7?8:11,z=t+_&e._posStateMask,o=H+(pe(e._repMatchLenEncoder,_-2,T)+oe(e,U,q,T))+xe[e._isMatch[(Z<<4)+z]>>>2]+ye(_e(e._literalEncoder,t+_,x(e._matchFinder,_-1-1)),1,x(e._matchFinder,_-1-(e.reps[U]+1)),x(e._matchFinder,_-1)),Z=j(Z),z=t+_+1&e._posStateMask,B=o+xe[2048-e._isMatch[(Z<<4)+z]>>>2]+xe[2048-e._isRep[Z]>>>2],C=_+1+m;d<r+C;)e._optimum[++d].Price=268435455;(i=B+(pe(e._repMatchLenEncoder,m-2,z)+oe(e,0,Z,z)))<(L=e._optimum[r+C]).Price&&(L.Price=i,L.PosPrev=r+_+1,L.BackPrev=0,L.Prev1IsChar=1,L.Prev2=1,L.PosPrev2=r,L.BackPrev2=U)}}if(w>k){for(w=k,M=0;w>e._matchDistances[M];M+=2);e._matchDistances[M]=w,M+=2}if(w>=X){for(S=y+xe[e._isRep[q]>>>2];d<r+w;)e._optimum[++d].Price=268435455;for(R=0;X>e._matchDistances[R];)R+=2;for(_=X;;++_)if((i=S+ne(e,s=e._matchDistances[R+1],_,T))<(L=e._optimum[r+_]).Price&&(L.Price=i,L.PosPrev=r,L.BackPrev=s+4,L.Prev1IsChar=0),_==e._matchDistances[R]){if(_<E&&(V=Math.min(E-1-_,e._numFastBytes),(m=D(e._matchFinder,_,s,V))>=2)){for(Z=q<7?7:10,z=t+_&e._posStateMask,o=i+xe[e._isMatch[(Z<<4)+z]>>>2]+ye(_e(e._literalEncoder,t+_,x(e._matchFinder,_-1-1)),1,x(e._matchFinder,_-(s+1)-1),x(e._matchFinder,_-1)),Z=j(Z),z=t+_+1&e._posStateMask,B=o+xe[2048-e._isMatch[(Z<<4)+z]>>>2]+xe[2048-e._isRep[Z]>>>2],C=_+1+m;d<r+C;)e._optimum[++d].Price=268435455;(i=B+(pe(e._repMatchLenEncoder,m-2,z)+oe(e,0,Z,z)))<(L=e._optimum[r+C]).Price&&(L.Price=i,L.PosPrev=r+_+1,L.BackPrev=0,L.Prev1IsChar=1,L.Prev2=1,L.PosPrev2=r,L.BackPrev2=s+4)}if((R+=2)==M)break}}}}}function ne(e,t,r,n){var o=G(r);return(t<128?e._distancesPrices[128*o+t]:e._posSlotPrices[(o<<6)+function(e){return e<131072?J[e>>6]+12:e<134217728?J[e>>16]+32:J[e>>26]+52}(t)]+e._alignPrices[15&t])+pe(e._lenEncoder,r-2,n)}function oe(e,t,r,n){var o;return t?(o=xe[2048-e._isRepG0[r]>>>2],1==t?o+=xe[e._isRepG1[r]>>>2]:(o+=xe[2048-e._isRepG1[r]>>>2],o+=Te(e._isRepG2[r],t-2))):(o=xe[e._isRepG0[r]>>>2],o+=xe[2048-e._isRep0Long[(r<<4)+n]>>>2]),o}function ie(e,t){t>0&&(function(e,t){var r,n,o,i,s,a,u,f,c,l,d,p,h,_,m,v,g;do{if(e._pos+e._matchMaxLen<=e._streamPos)p=e._matchMaxLen;else if((p=e._streamPos-e._pos)<e.kMinMatchCheck){z(e);continue}for(h=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,n=e._bufferOffset+e._pos,e.HASH_ARRAY?(a=1023&(g=T[255&e._bufferBase[n]]^255&e._bufferBase[n+1]),e._hash[a]=e._pos,u=65535&(g^=(255&e._bufferBase[n+2])<<8),e._hash[1024+u]=e._pos,f=(g^T[255&e._bufferBase[n+3]]<<5)&e._hashMask):f=255&e._bufferBase[n]^(255&e._bufferBase[n+1])<<8,o=e._hash[e.kFixHashSize+f],e._hash[e.kFixHashSize+f]=e._pos,m=1+(e._cyclicBufferPos<<1),v=e._cyclicBufferPos<<1,l=d=e.kNumHashDirectBytes,r=e._cutValue;;){if(o<=h||0==r--){e._son[m]=e._son[v]=0;break}if(i=((s=e._pos-o)<=e._cyclicBufferPos?e._cyclicBufferPos-s:e._cyclicBufferPos-s+e._cyclicBufferSize)<<1,_=e._bufferOffset+o,c=l<d?l:d,e._bufferBase[_+c]==e._bufferBase[n+c]){for(;++c!=p&&e._bufferBase[_+c]==e._bufferBase[n+c];);if(c==p){e._son[v]=e._son[i],e._son[m]=e._son[i+1];break}}(255&e._bufferBase[_+c])<(255&e._bufferBase[n+c])?(e._son[v]=o,v=i+1,o=e._son[v],d=c):(e._son[m]=o,m=i,o=e._son[m],l=c)}z(e)}while(0!=--t)}(e._matchFinder,t),e._additionalOffset+=t)}function se(e){var t=0;return e._numDistancePairs=function(e,t){var r,n,o,i,s,a,u,f,c,l,d,p,h,_,m,v,g,y,w,b,P;if(e._pos+e._matchMaxLen<=e._streamPos)_=e._matchMaxLen;else if((_=e._streamPos-e._pos)<e.kMinMatchCheck)return z(e),0;for(g=0,m=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,n=e._bufferOffset+e._pos,v=1,f=0,c=0,e.HASH_ARRAY?(f=1023&(P=T[255&e._bufferBase[n]]^255&e._bufferBase[n+1]),c=65535&(P^=(255&e._bufferBase[n+2])<<8),l=(P^T[255&e._bufferBase[n+3]]<<5)&e._hashMask):l=255&e._bufferBase[n]^(255&e._bufferBase[n+1])<<8,o=e._hash[e.kFixHashSize+l]||0,e.HASH_ARRAY&&(i=e._hash[f]||0,s=e._hash[1024+c]||0,e._hash[f]=e._pos,e._hash[1024+c]=e._pos,i>m&&e._bufferBase[e._bufferOffset+i]==e._bufferBase[n]&&(t[g++]=v=2,t[g++]=e._pos-i-1),s>m&&e._bufferBase[e._bufferOffset+s]==e._bufferBase[n]&&(s==i&&(g-=2),t[g++]=v=3,t[g++]=e._pos-s-1,i=s),0!=g&&i==o&&(g-=2,v=1)),e._hash[e.kFixHashSize+l]=e._pos,w=1+(e._cyclicBufferPos<<1),b=e._cyclicBufferPos<<1,p=h=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&o>m&&e._bufferBase[e._bufferOffset+o+e.kNumHashDirectBytes]!=e._bufferBase[n+e.kNumHashDirectBytes]&&(t[g++]=v=e.kNumHashDirectBytes,t[g++]=e._pos-o-1),r=e._cutValue;;){if(o<=m||0==r--){e._son[w]=e._son[b]=0;break}if(a=((u=e._pos-o)<=e._cyclicBufferPos?e._cyclicBufferPos-u:e._cyclicBufferPos-u+e._cyclicBufferSize)<<1,y=e._bufferOffset+o,d=p<h?p:h,e._bufferBase[y+d]==e._bufferBase[n+d]){for(;++d!=_&&e._bufferBase[y+d]==e._bufferBase[n+d];);if(v<d&&(t[g++]=v=d,t[g++]=u-1,d==_)){e._son[b]=e._son[a],e._son[w]=e._son[a+1];break}}(255&e._bufferBase[y+d])<(255&e._bufferBase[n+d])?(e._son[b]=o,b=a+1,o=e._son[b],h=d):(e._son[w]=o,w=a,o=e._son[w],p=d)}return z(e),g}(e._matchFinder,e._matchDistances),e._numDistancePairs>0&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=D(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function ae(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=0)}function ue(e){return e<2048?J[e]:e<2097152?J[e>>10]+20:J[e>>20]+40}function fe(e,t){Le(e._choice);for(var r=0;r<t;++r)Le(e._lowCoder[r].Models),Le(e._midCoder[r].Models);Le(e._highCoder.Models)}function ce(e,t,r,n,o){var i,s,a,u,f;for(i=xe[e._choice[0]>>>2],a=(s=xe[2048-e._choice[0]>>>2])+xe[e._choice[1]>>>2],u=s+xe[2048-e._choice[1]>>>2],f=0,f=0;f<8;++f){if(f>=r)return;n[o+f]=i+ke(e._lowCoder[t],f)}for(;f<16;++f){if(f>=r)return;n[o+f]=a+ke(e._midCoder[t],f-8)}for(;f<r;++f)n[o+f]=u+ke(e._highCoder,f-8-8)}function le(e,t,r,n){!function(e,t,r,n){r<8?(De(t,e._choice,0,0),Se(e._lowCoder[n],t,r)):(r-=8,De(t,e._choice,0,1),r<8?(De(t,e._choice,1,0),Se(e._midCoder[n],t,r)):(De(t,e._choice,1,1),Se(e._highCoder,t,r-8)))}(e,t,r,n),0==--e._counters[n]&&(ce(e,n,e._tableSize,e._prices,272*n),e._counters[n]=e._tableSize)}function de(e){return function(e){e._choice=c(2),e._lowCoder=c(16),e._midCoder=c(16),e._highCoder=Be({},8);for(var t=0;t<16;++t)e._lowCoder[t]=Be({},3),e._midCoder[t]=Be({},3)}(e),e._prices=[],e._counters=[],e}function pe(e,t,r){return e._prices[272*r+t]}function he(e,t){for(var r=0;r<t;++r)ce(e,r,e._tableSize,e._prices,272*r),e._counters[r]=e._tableSize}function _e(e,t,r){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&r)>>>8-e.m_NumPrevBits)]}function me(e,t,r){var n,o,i=1;for(o=7;o>=0;--o)n=r>>o&1,De(t,e.m_Encoders,i,n),i=i<<1|n}function ve(e,t,r,n){var o,i,s,a,u=1,f=1;for(i=7;i>=0;--i)o=n>>i&1,a=f,u&&(a+=1+(s=r>>i&1)<<8,u=s==o),De(t,e.m_Encoders,a,o),f=f<<1|o}function ge(e){return e.m_Encoders=c(768),e}function ye(e,t,r,n){var o,i,s=1,a=7,u=0;if(t)for(;a>=0;--a)if(i=r>>a&1,o=n>>a&1,u+=Te(e.m_Encoders[(1+i<<8)+s],o),s=s<<1|o,i!=o){--a;break}for(;a>=0;--a)o=n>>a&1,u+=Te(e.m_Encoders[s],o),s=s<<1|o;return u}function we(e){e.BackPrev=-1,e.Prev1IsChar=0}function be(e,t){return e.NumBitLevels=t,e.Models=c(1<<t),e}function Pe(e,t){var r,n=1;for(r=e.NumBitLevels;0!=r;--r)n=(n<<1)+Ae(t,e.Models,n);return n-(1<<e.NumBitLevels)}function Be(e,t){return e.NumBitLevels=t,e.Models=c(1<<t),e}function Se(e,t,r){var n,o,i=1;for(o=e.NumBitLevels;0!=o;)n=r>>>--o&1,De(t,e.Models,i,n),i=i<<1|n}function ke(e,t){var r,n,o=1,i=0;for(n=e.NumBitLevels;0!=n;)r=t>>>--n&1,i+=Te(e.Models[o],r),o=(o<<1)+r;return i}function Ee(e,t,r){var n,o,i=1;for(o=0;o<e.NumBitLevels;++o)n=1&r,De(t,e.Models,i,n),i=i<<1|n,r>>=1}function Me(e,t){var r,n,o=1,i=0;for(n=e.NumBitLevels;0!=n;--n)r=1&t,t>>>=1,i+=Te(e.Models[o],r),o=o<<1|r;return i}function Re(e,t,r,n,o){var i,s,a=1;for(s=0;s<n;++s)De(r,e,t+a,i=1&o),a=a<<1|i,o>>=1}function Ce(e,t,r,n){var o,i,s=1,a=0;for(i=r;0!=i;--i)o=1&n,n>>>=1,a+=xe[(2047&(e[t+s]-o^-o))>>>2],s=s<<1|o;return a}function Ae(e,t,r){var n,o=t[r];return n=(e.Range>>>11)*o,(-2147483648^e.Code)<(-2147483648^n)?(e.Range=n,t[r]=o+(2048-o>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|B(e.Stream),e.Range<<=8),0):(e.Range-=n,e.Code-=n,t[r]=o-(o>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|B(e.Stream),e.Range<<=8),1)}function Le(e){for(var t=e.length-1;t>=0;--t)e[t]=1024}var xe=function(){var e,t,r,n=[];for(t=8;t>=0;--t)for(e=1<<9-t,r=1<<9-t-1;r<e;++r)n[r]=(t<<6)+(e-r<<6>>>9-t-1);return n}();function De(e,t,r,n){var o,i=t[r];o=(e.Range>>>11)*i,n?(e.Low=l(e.Low,d(m(o),[4294967295,0])),e.Range-=o,t[r]=i-(i>>>5)<<16>>16):(e.Range=o,t[r]=i+(2048-i>>>5)<<16>>16),-16777216&e.Range||(e.Range<<=8,Fe(e))}function Oe(e,t,r){for(var n=r-1;n>=0;--n)e.Range>>>=1,1==(t>>>n&1)&&(e.Low=l(e.Low,m(e.Range))),-16777216&e.Range||(e.Range<<=8,Fe(e))}function Ie(e){return l(l(m(e._cacheSize),e._position),[4,0])}function Fe(e){var t,r,n,o,i=v((n=32,o=w(r=e.Low,n&=63),r[1]<0&&(o=l(o,y([2,0],31))),o));if(0!=i||p(e.Low,[4278190080,0])<0){e._position=l(e._position,m(e._cacheSize)),t=e._cache;do{M(e.Stream,t+i),t=255}while(0!=--e._cacheSize);e._cache=v(e.Low)>>>24}++e._cacheSize,e.Low=y(d(e.Low,[16777215,0]),8)}function Te(e,t){return xe[(2047&(e-t^-t))>>>2]}function ze(e){for(var t,r,n,o=0,i=0,s=e.length,a=[],u=[];o<s;++o,++i){if(128&(t=255&e[o]))if(192==(224&t)){if(o+1>=s)return e;if(128!=(192&(r=255&e[++o])))return e;u[i]=(31&t)<<6|63&r}else{if(224!=(240&t))return e;if(o+2>=s)return e;if(128!=(192&(r=255&e[++o])))return e;if(128!=(192&(n=255&e[++o])))return e;u[i]=(15&t)<<12|(63&r)<<6|63&n}else{if(!t)return e;u[i]=t}16383==i&&(a.push(String.fromCharCode.apply(String,u)),i=-1)}return i>0&&(u.length=i,a.push(String.fromCharCode.apply(String,u))),a.join("")}function Ne(e){var t,r,n,o=[],i=0,s=e.length;if("object"==typeof e)return e;for(function(e,t,r,n,o){var i;for(i=0;i<r;++i)n[o++]=e.charCodeAt(i)}(e,0,s,o,0),n=0;n<s;++n)(t=o[n])>=1&&t<=127?++i:i+=!t||t>=128&&t<=2047?2:3;for(r=[],i=0,n=0;n<s;++n)(t=o[n])>=1&&t<=127?r[i++]=t<<24>>24:!t||t>=128&&t<=2047?(r[i++]=(192|t>>6&31)<<24>>24,r[i++]=(128|63&t)<<24>>24):(r[i++]=(224|t>>12&15)<<24>>24,r[i++]=(128|t>>6&63)<<24>>24,r[i++]=(128|63&t)<<24>>24);return r}function Ue(e){return e[1]+e[0]}var We,He=(We=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}],function(e){return We[e-1]||We[6]});return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||(onmessage=function(e){e&&e.data&&(2==e.data.action?t.decompress(e.data.data,e.data.cbn):1==e.data.action&&t.compress(e.data.data,e.data.mode,e.data.cbn))}),{compress:function(e,t,r,o){var i,s,a={},u=void 0===r&&void 0===o;if("function"!=typeof r&&(s=r,r=o=0),o=o||function(e){if(void 0!==s)return f(e,s)},r=r||function(e,t){if(void 0!==s)return postMessage({action:1,cbn:s,result:e,error:t})},u){for(a.c=A({},Ne(e),He(t));Y(a.c.chunker););return E(a.c.output)}try{a.c=A({},Ne(e),He(t)),o(0)}catch(c){return r(null,c)}n(function e(){try{for(var t,s=(new Date).getTime();Y(a.c.chunker);)if(i=Ue(a.c.chunker.inBytesProcessed)/Ue(a.c.length_0),(new Date).getTime()-s>200)return o(i),n(e,0),0;o(1),t=E(a.c.output),n(r.bind(null,t),0)}catch(c){r(null,c)}},0)},decompress:function(e,t,r){var o,i,s,a,u={},c=void 0===t&&void 0===r;if("function"!=typeof t&&(i=t,t=r=0),r=r||function(e){if(void 0!==i)return f(s?e:-1,i)},t=t||function(e,t){if(void 0!==i)return postMessage({action:2,cbn:i,result:e,error:t})},c){for(u.d=L({},e);Y(u.d.chunker););return ze(E(u.d.output))}try{u.d=L({},e),a=Ue(u.d.length_0),s=a>-1,r(0)}catch(l){return t(null,l)}n(function e(){try{for(var i,f=0,c=(new Date).getTime();Y(u.d.chunker);)if(++f%1e3==0&&(new Date).getTime()-c>200)return s&&(o=Ue(u.d.chunker.decoder.nowPos64)/a,r(o)),n(e,0),0;r(1),i=ze(E(u.d.output)),n(t.bind(null,i),0)}catch(l){t(null,l)}},0)}}}();this.LZMA=this.LZMA_WORKER=t}).call(this,r({}).setImmediate);var lt,dt={};lt={}.LZMA_WORKER,dt.LZMA=function(){return lt},lt.compress,lt.decompress,function(e){var t=De.Component,r=De.h,n=dt.LZMA(),o=Je,i=Ue.Layer;function s(e,t,n,o){return Ie([r("label.code",{css:{root:["font-family: mono"]}},t),r("input.code.f6.pa1.w-100",{props:{type:n,value:e},on:{input:function(e){var t=e.currentTarget.value;o(t)}}})])}function a(e){return e.compressedState.loading?r("div",[r("p","Loading...")]):r("div",[r("p","Unique link for this polygram:"),r("textarea.w-100",{props:{value:e.compressedState.content,rows:6}})])}function u(e,t){return Ze({on:{click:function(){delete e.layers[t.id],e.layerOrder=e.layerOrder.filter(function(e){return e.id!==t.id}),d(e,{name:"remove-layer",backwards:function(){return p(e,t)},forwards:function(){return h(e,t)}}),e._render()}}},"Remove")}function f(e,t){return Ze({on:{click:function(){t.renaming=!0,e._render()}}},"Rename")}function c(e,t){return Ze({on:{click:function(){var r=i(e),n=Object.assign({},t.props),o=Object.assign({},t.flags);r.props=n,r.flags=o,d(e,{name:"copy-layer",backwards:function(){return h(e,r)},forwards:function(){return p(e,r)}}),p(e,r)}}},"Copy")}function l(e){return Ze({on:{click:function(){var t=i(e);d(e,{name:"new-layer",backwards:function(){return h(e,t)},forwards:function(){return p(e,t)}}),p(e,t)}}},"Add layer")}function d(e,t){e.backwardActions.push(t),e.forwardActions.length&&(e.forwardActions=[])}function p(e,t){e.layers[t.id]=t,e.layerOrder.push(t),e._render()}function h(e,t){e.layerOrder=e.layerOrder.filter(function(e){return e.id!==t.id}),delete e.layers[t.id],e._render()}function _(e){return Ze({props:{disabled:!e.backwardActions.length},on:{click:function(){var t=e.backwardActions.pop();t.backwards(),e.forwardActions.push(t),e._render()}}},"Undo")}function m(e){return Ze({props:{disabled:!e.forwardActions.length},on:{click:function(){var t=e.forwardActions.pop();t.forwards(),e.backwardActions.push(t),e._render()}}},"Redo")}function v(t,r){var o=e.from(t,"base64");n.decompress(o,function(e){!function(e,t){var r=JSON.parse(e);t.canvasWidth=r.w||r.canvasWidth,t.canvasHeight=r.h||r.canvasHeight,t.fillStyle=r.fs||"white",t.layers={},t.layerOrder=[],(r.es||r.elemOrder||r.layerOrder||[]).forEach(function(e){var r=i(t),n=e.p||e.props||{};for(var o in n)r.setProperty(o,n[o]);r.flags=e.f||e.flags,r.name=e.n||e.name,t.layers[r.name]=r,t.layerOrder.push(r),t.elm.width=t.canvasWidth,t.elm.height=t.canvasHeight}),t._render()}(e,r)})}document.body.addEventListener("mousemove",function(e){document._mouseX=e.clientX,document._mouseY=e.clientY});var g,y,w=(y=function(e){return t({view:function(){return r("canvas.fixed.top-0",{style:{left:e.sidebarWidth+"px"},props:{id:"tutorial"},hook:{insert:function(t){var r=t.elm;e.elm=r,r.width=e.canvasWidth,r.height=e.canvasHeight;var n=r.getContext("2d");n.globalCompositeOperation="source-over",n.save(),function t(r){for(var o in document._ts=r,n.fillStyle=e.fillStyle||"white",n.fillRect(0,0,e.canvasWidth,e.canvasHeight),e.layers){var i=e.layers[o];i.draw&&i.draw(n)}window.requestAnimationFrame(t)}()}}})}})}(g=t({canvasWidth:1e3,canvasHeight:1e3,sidebarWidth:400,fillStyle:"white",layers:{},layerOrder:[],shareModal:o(),openModal:o(),compressedState:{loading:!1},backwardActions:[],forwardActions:[],shareState:function(){var t,r,o,i,s=this;this.shareModal.open(),this.compressedState.loading=!0,this._render(),o=(r=(t=this).layerOrder.map(function(e){return{f:e.flags,p:e.props,n:e.name}}),JSON.stringify({w:t.canvasWidth,h:t.canvasHeight,fs:t.fillStyle,es:r})),i=function(e){s.compressedState.loading=!1,document.location.hash=e,s.compressedState.content=window.location.href,s._render()},n.compress(o,2,function(t){var r=e.from(t).toString("base64");i(r)})},changeCanvasHeight:function(e){this.canvasHeight=e,this.elm.height=e},changeCanvasWidth:function(e){this.canvasWidth=e,this.elm.width=e},changeFillStyle:function(e){this.fillStyle=e},view:function(){var e,t=this,n=this.layerOrder.map(function(e){return function(e,t){var n;return n=t.renaming?[r("form",{on:{submit:function(){t.renaming=!1,t._render(),e._render()}}},[r("input",{props:{type:"text",value:t.name},on:{input:function(e){t.name=e.currentTarget.value}}})]),r("div",[Ze({props:{type:"submit"}},"Set")])]:[r("span.pointer.dib.truncate",{on:{click:function(){return t.toggleFormOpen()}}},t.name),r("div.nowrap",[f(e,t),c(e,t),u(e,t)])],r("div",{key:t.name},[r("div.b.bb.b--black-20.mv1.code.pv1.flex.justify-between.items-center",n),t.view()])}(t,e)});return r("div.bg-light-gray.pv2.pl2.pr3.relative",{style:{width:this.sidebarWidth+"px"}},[this.openModal.view({title:"Open",content:(e=this,r("div",[r("form",{on:{submit:function(t){t.preventDefault(),v(t.currentTarget.querySelector("textarea").value.match(/#(.+)$/)[1],e)}}},[r("p","Paste a polygram link:"),r("textarea.w-100",{props:{rows:4}}),Ze({},"Load")])]))}),this.shareModal.view({title:"Share Polygram",content:a(this)}),r("div.flex.justify-end",[Ze({on:{click:function(){return t.shareState()}}},"Share"),Ze({on:{click:function(){return t.openModal.open()}}},"Open")]),s(this.canvasWidth,"canvas width","number",function(e){return t.changeCanvasWidth(e)}),s(this.canvasHeight,"canvas height","number",function(e){return t.changeCanvasHeight(e)}),s(this.fillStyle,"background color","text",function(e){return t.changeFillStyle(e)}),r("div",[l(this),_(this),m(this)]),r("div",n),r("div",{style:{position:"absolute",height:"100%",width:"6px",background:"gray",top:"0px",right:"0px",zIndex:"0",cursor:"col-resize"},on:{mousedown:function(){var e=function(e){var r=e.clientX;r>200&&r<1e3&&(t.sidebarWidth=r,t.elm.style.left=t.sidebarWidth+"px",t._render())},r=function(t){document.body.removeEventListener("mouseup",r),document.body.removeEventListener("mousemove",e)};document.body.addEventListener("mouseup",r),document.body.addEventListener("mousemove",e)}}})])}})),t({canvasState:g,canvas:y,view:function(){return r("div",[this.canvasState.view(),this.canvas.view()])}}));document.location.hash.length&&v(document.location.hash.replace(/^#/,""),w.canvasState),document.body.appendChild(w.view().elm)}.call(this,p.Buffer)}();